{% extends 'shop_base.html.twig' %}

{% block title %}Boutique MHSC
{% endblock %}

{% block body %}


	<main class="w-100 mb-5">

		<header class="shop-page__header mb-5">
			<img class="shop-page__header__image" src="/assets/images/background-bleu.png" alt="Image de présentation de l'article">

			<div class="shop-page__header__title container-md py-4 d-flex align-items-center w-100 ">
				<h1 class="mb-0 text-center w-100 title-primary">VOTRE COMMANDE</h1>
			</div>
		</header>

		<section class="py-2 py-md-3 px-2 container-md">

			<div class="order-page row">
				<div class="order-page__cart col-md-6">

					<h4>Panier</h4>
					<table class="table striped text-center">
						<thead>
							<tr>
								<th>NOM</th>
								<th>QUANTITE</th>
								<th>PRIX UNITAIRE</th>
							</tr>
						</thead>
						<tbody>
							{% for item in cart %}

								<tr>
									<td>{{item.product.name}}</td>
									<td>{{item.quantity}}</td>
									<td>{{item.product.price}}
										€</td>
								</tr>
							{% endfor %}
						</tbody>
						<tfoot>
							<tr>
								<td></td>
								<td>Total :
								</td>
								<td>{{total}}
									€</td>
							</tr>
						</tfoot>
					</table>
				</div>
				<div class="order-page__address col-md-6">
					<h4>Adresse de livraison</h4>
					<div class="p-3 bg-light d-flex flex-column">
						<p class="mb-0">
							<b>Nom :
							</b>
							{{order.user.firstname}}
							{{order.user.lastname}}
						</p>
						<p class="mb-0">
							<b>Adresse ligne 1 :
							</b>
							{{order.address.address}}
						</p>
						<p class="mb-0">
							<b>Adresse ligne 2 :
							</b>
							{{order.address.address2}}
						</p>
						<p class="mb-0">
							<b>Code postal :
							</b>
							{{order.address.zipcode}}
							<b>
								| Ville :
							</b>
							{{order.address.city}}
						</p>
						<p class="mb-0">
							<b>Pays :
							</b>
							{{order.address.country}}
						</p>
						<p class="mb-0">

							<b>Téléphone :
							</b>
							{{order.user.phone}}
						</p>
						<!-- Button trigger modal -->
						<button type="button" class="btn btn-primary align-self-end" data-bs-toggle="modal" data-bs-target="#exampleModal">
							Modifier l'adresse
						</button>
					</div>
				</div>
			</div>


			<div class="d-flex flex-wrap justify-content-end gap-3 align-items-center my-0 py-3">
				<p class="my-0 fw-bold fs-3 text-end">Total à payer :
					{{total}}€</p>
				<a class="btn btn-primary" href="{{path('app_shop/checkout')}}">Payer la commande</a>
			</div>
		</section>

		<!-- Modal -->
		<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
						<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
					</div>
					<div class="modal-body d-flex flex-column">
						{{ include('shop/_address_form.html.twig', {'button_label': 'Modifier'}) }}
					</div>
				</div>
			</div>
		</div>
	</main>
{% endblock %}
